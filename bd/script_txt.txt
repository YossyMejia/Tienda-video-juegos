CREATE TABLE provincia (
    id_provincia      NUMBER NOT NULL,
    nombre_provincia  VARCHAR2(10 CHAR) NOT NULL
);

 
ALTER TABLE provincia ADD CONSTRAINT provincia_pk PRIMARY KEY ( id_provincia );

CREATE TABLE canton (
    id_canton      NUMBER NOT NULL,
    nombre_canton  VARCHAR2(25 CHAR) NOT NULL,
    id_provincia   NUMBER NOT NULL
);

ALTER TABLE canton ADD CONSTRAINT canton_pk PRIMARY KEY ( id_canton );

ALTER TABLE canton
    ADD CONSTRAINT canton_provincia_fk FOREIGN KEY ( id_provincia )
        REFERENCES provincia ( id_provincia );
        
CREATE TABLE distrito (
    id_distrito      NUMBER NOT NULL,
    nombre_distrito  VARCHAR2 
--  ERROR: VARCHAR2 size not specified 
     NOT NULL,
    id_canton        NUMBER NOT NULL
);

ALTER TABLE distrito ADD CONSTRAINT distrito_pk PRIMARY KEY ( id_distrito );

ALTER TABLE distrito
    ADD CONSTRAINT distrito_canton_fk FOREIGN KEY ( id_canton )
        REFERENCES canton ( id_canton );

CREATE TABLE tipo_usuario (
    tipo_usuario      NUMBER(1) NOT NULL,
    nombre_t_usuario  VARCHAR2(15 CHAR) NOT NULL
);

ALTER TABLE tipo_usuario ADD CONSTRAINT tipo_usuario_pk PRIMARY KEY ( tipo_usuario );

CREATE TABLE usuario (
    id_usuario        NUMBER NOT NULL,
    nombre_usuario    VARCHAR2(35 CHAR) NOT NULL,
    primer_apellido   VARCHAR2(35 CHAR) NOT NULL,
    segundo_apellido  VARCHAR2(35 CHAR) NOT NULL,
    correo            VARCHAR2(35 CHAR) NOT NULL,
    contrasena        VARCHAR2(40 CHAR) NOT NULL,
    tipo_usuario      NUMBER NOT NULL,
    tipo_usuario1     NUMBER(1) NOT NULL
);

ALTER TABLE usuario ADD CONSTRAINT usuario_pk PRIMARY KEY ( id_usuario );

ALTER TABLE usuario
    ADD CONSTRAINT usuario_tipo_usuario_fk FOREIGN KEY ( tipo_usuario1 )
        REFERENCES tipo_usuario ( tipo_usuario );
        
        
CREATE TABLE direccion (
    id_direccion  NUMBER NOT NULL,
    datos_extra   VARCHAR2(255 BYTE) NOT NULL,
    id_distrito   NUMBER NOT NULL
);

ALTER TABLE direccion ADD CONSTRAINT direccion_pk PRIMARY KEY ( id_direccion );

ALTER TABLE direccion
    ADD CONSTRAINT direccion_distrito_fk FOREIGN KEY ( id_distrito )
        REFERENCES distrito ( id_distrito );


CREATE TABLE usuarioxdireccion (
    direccion_id_direccion  NUMBER NOT NULL,
    usuario_id_usuario      NUMBER NOT NULL
);

ALTER TABLE usuarioxdireccion ADD CONSTRAINT usuarioxdireccion_pk PRIMARY KEY ( direccion_id_direccion,
                                                                                usuario_id_usuario );

ALTER TABLE usuarioxdireccion
    ADD CONSTRAINT usuarioxdireccion_direccion_fk FOREIGN KEY ( direccion_id_direccion )
        REFERENCES direccion ( id_direccion );

ALTER TABLE usuarioxdireccion
    ADD CONSTRAINT usuarioxdireccion_usuario_fk FOREIGN KEY ( usuario_id_usuario )
        REFERENCES usuario ( id_usuario );
        
CREATE TABLE producto (
    id_producto           NUMBER NOT NULL,
    nombre_producto       VARCHAR2(40 CHAR) NOT NULL,
    descripcion_producto  VARCHAR2(100 CHAR) NOT NULL,
    precio                FLOAT NOT NULL,
    cantidad              NUMBER NOT NULL
);



CREATE TABLE orden (
    id_orden       NUMBER NOT NULL,
    fecha_orden    DATE NOT NULL,
    estado         VARCHAR2(50 CHAR) NOT NULL,
    detalles       VARCHAR2(100 CHAR) NOT NULL,
    id_cliente     NUMBER NOT NULL,
    id_repartidor  NUMBER NOT NULL
);

ALTER TABLE orden ADD CONSTRAINT orden_pk PRIMARY KEY ( id_orden );

ALTER TABLE orden
    ADD CONSTRAINT orden_usuario_fk FOREIGN KEY ( id_cliente )
        REFERENCES usuario ( id_usuario );

ALTER TABLE orden
    ADD CONSTRAINT orden_usuario_fkv2 FOREIGN KEY ( id_repartidor )
        REFERENCES usuario ( id_usuario );
        

CREATE TABLE consulta (
    id_consulta        NUMBER NOT NULL,
    fecha_consulta     DATE NOT NULL,
    detalles_consulta  VARCHAR2(100 CHAR),
    id_cliente         NUMBER NOT NULL,
    id_soporte         NUMBER NOT NULL
);

ALTER TABLE consulta ADD CONSTRAINT consulta_pk PRIMARY KEY ( id_consulta );

ALTER TABLE consulta
    ADD CONSTRAINT consulta_usuario_fk FOREIGN KEY ( id_cliente )
        REFERENCES usuario ( id_usuario );

ALTER TABLE consulta
    ADD CONSTRAINT consulta_usuario_fkv1 FOREIGN KEY ( id_soporte )
        REFERENCES usuario ( id_usuario );
        
CREATE TABLE tarjeta (
    id_tarjeta         NUMBER NOT NULL,
    titular_tarjeta    VARCHAR2(50 CHAR) NOT NULL,
    numero_tarjeta     NUMBER NOT NULL,
    ccv                NUMBER NOT NULL,
    fecha_vencimiento  DATE NOT NULL,
    id_usuario         NUMBER NOT NULL
);

ALTER TABLE tarjeta ADD CONSTRAINT tarjeta_pk PRIMARY KEY ( id_tarjeta );

ALTER TABLE tarjeta
    ADD CONSTRAINT tarjeta_usuario_fk FOREIGN KEY ( id_usuario )
        REFERENCES usuario ( id_usuario );
        
CREATE TABLE productoxorden (
    orden_id_orden NUMBER NOT NULL
);

ALTER TABLE productoxorden ADD CONSTRAINT productoxorden_pk PRIMARY KEY ( orden_id_orden );

ALTER TABLE productoxorden
    ADD CONSTRAINT productoxorden_orden_fk FOREIGN KEY ( orden_id_orden )
        REFERENCES orden ( id_orden );

-- Error - Foreign Key productoXorden_Producto_FK has no columns

CREATE TABLE categoria (
    id_categoria     NUMBER NOT NULL,
    nombre_cat       VARCHAR2(40 CHAR) NOT NULL,
    descripcion_cat  VARCHAR2(100 CHAR) NOT NULL
);


CREATE TABLE factura (
    id_factura     NUMBER NOT NULL,
    descripcion    VARCHAR2(100 CHAR) NOT NULL,
    monto          FLOAT NOT NULL,
    impuestos      FLOAT NOT NULL,
    fecha_factura  DATE NOT NULL,
    id_orden       NUMBER NOT NULL
);

CREATE UNIQUE INDEX factura__idx ON
    factura (
        id_orden
    ASC );

ALTER TABLE factura
    ADD CONSTRAINT factura_orden_fk FOREIGN KEY ( id_orden )
        REFERENCES orden ( id_orden );
        